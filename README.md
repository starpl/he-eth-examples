# HE Ballot
Proof-of-Work концепта применения гомоморфного шифрования для задачи проведения голосования с обеспечением приватности для голосующих на основе Ethereum blockchain + IPFS\

## Описание механизмов работы

Голосование представляется смарт - контрактом на блокчейне Ethereum. Деплоем контракта занимается человек, производящий сбор, подсчёт голосов, а также объявление результатов (далее - ответственное лицо).

Ответственное лицо генерирует пару ключей при помощи SEAL.keyGenerator(context) (context для простоты для всех один и тот же). При деплое контракта в конструктор он передаёт:
- Список возможных вариантов выбора
- CID на публичный ключ в IPFS (размещается до деплоя)
- Возможно, доп. инфа

Также в контракте есть дополнительные поля:
- булева переменная, говорящая о том, завершено ли голосование
- Поле для CID на приватный ключ (заполняется при завершении голсования) в IPFS
- Результат голосования (заполняется при завершении голосования)
- некоторая структура, которая хранит адреса и соответствующие им CIDы в IPFS зашифрованных голосов (либо mapping<адрес-CID> + массив с адресами, либо массив структур<адрес, CID>)
- Возможно, время создания и время окончания

Завершить голосование может только ответственное лицо (ограничения на взаимодействие с чужих адресов)

После деплоя контракта голосующий должен обратиться в спец.орган, который производит деплой контракта - бюллетеня. От голосующего требуется аутентификация, после чего спец.орган заносит в свою локальную БД запись о выдаче бюллетеня и деплоит контракт бюллетеня, но только в случае если:
- аутентификация проходит успешно 
- человек еще не голосовал
- голосование доступно (т.е. бюллетень не выдается позже завершения периода голосования)

Бюллетень на старте содержит:
- Какое - то количество эфира для вызова метода записи голоса в контракт Голосования (т.е. когда голосующий вызывает метод и передает туда свой голос, то контракт-бюллетень вызывает метод Голосования, который пишет адрес и CID)
- Адрес на контракт-голосование
- Адрес "владельца" (адрес кошелька, с которого можно проголосовать)
Также бюллетень содержит следующие поля:
- булева переменная - статус голоса (проголосовал или нет)
- CID на голос в IPFS
- Хэш идентификатора голосующего (выдаётся спец.органом при деплое)

Бюллетень должен блокировать редактирование после отправки голоса.

После завершения периода голосования, ответственное лицо читает все CID от всех контрактов-бюллетеней, стягивает все файлы, суммирует все вектора, а затем расшифровывает вектор и вызывает метод контракта Голосования, завершающего период голосования, передавая в него CID секретного ключа и результирующий вектор с расшифрованными голосами.


## Userstories

### Я, как голосующий...
- хочу отдавать голос за нужного кандидата / вариант из голосования

### Я, как проверяющий...
- хочу собирать голоса и подсчитывать их

### Я, как госреестр...
- хочу выдавать бюллетени по одному на человека


## TODO

Реализовать набор функций для взаимодействия с разными API

